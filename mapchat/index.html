<!DOCTYPE html>

<html>
<head>
	<title> Mapchat </title>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
	<link rel="stylesheet" href="style.css"/>
	
	<script>

		var request = new XMLHttpRequest();
		/* Declares my variables and options*/
		var my_lat = 0;
		var my_lng = 0;
		var me = new google.maps.LatLng(my_lat, my_lng);
		var map_options = {
			zoom: 8,
			center: me,
			mapTypeId: google.maps.MapTypeId.ROADMAP
		};
		var map;

		/* Draws map according to specifications */
		function initMap() {
			map = new google.maps.Map(document.getElementById("map"), map_options);
			get_my_location();
		}


		/* Getting my location */
		function get_my_location() {
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(function(position) {
					my_lat = position.coords.latitude;
					my_lng = position.coords.longitude;
					draw_map();
				});
			} 
			else {
				alert("Your browser doesn't support geolocation!");
			}
		}

		/* Drawing new map */
		function draw_map() {
			console.log("inside draw_map function");
			var me = new google.maps.LatLng(my_lat, my_lng);

			/* Update map and pan to me */
			map.panTo(me);

			var marker = new google.maps.Marker ({
				position: me,
				title: "Hello!"
			});

			/* Adding marker to map */
			console.log("about to set marker to map");
			marker.setMap(map);

		}

// 		var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
// var mapOptions = {
//   zoom: 4,
//   center: myLatlng
// }
// var map = new google.maps.Map(document.getElementById("map"), mapOptions);

// var marker = new google.maps.Marker({
//     position: myLatlng,
//     title:"Hello World!"
// });

// To add the marker to the map, call setMap();
// marker.setMap(map);




	// 	}

	//   if (navigator.geolocation) {
	//     navigator.geolocation.getCurrentPosition(function(position) {
	//       var pos = {
	//         lat: position.coords.latitude,
	//         lng: position.coords.longitude
	//       };

	//       infoWindow.setPosition(pos);
	//       infoWindow.setContent('Location found.');
	//       map.setCenter(pos);
	//     }, function() {
	//       handleLocationError(true, infoWindow, map.getCenter());
	//     });
	//   } else {
	//     // Browser doesn't support Geolocation
	//     handleLocationError(false, infoWindow, map.getCenter());
	//   }
	// }


	</script>

</head>

<body onload="initMap()">
	<!-- Making the space for the canvas -->
	<div id="map"></div>
	</body>




</html>