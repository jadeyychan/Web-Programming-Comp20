<!DOCTYPE html>

<html>
<head>
	<title> Mapchat </title>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
	<link rel="stylesheet" href="style.css"/>
	
	<script>

		var request = new XMLHttpRequest();
		/* Declares my variables and options*/
		var my_lat = 0;
		var my_lng = 0;
		var me = new google.maps.LatLng(my_lat, my_lng);
		var map_options = {
			zoom: 8,
			center: me,
			mapTypeId: google.maps.MapTypeId.ROADMAP
		};
		var map;

		/* Draws map according to specifications */
		function initMap() {
			map = new google.maps.Map(document.getElementById("map"), map_options);
			get_my_location();
		}

		/* Getting my location */
		function get_my_location() {
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(function(position) {
					my_lat = position.coords.latitude;
					my_lng = position.coords.longitude;
					draw_map();
				});
			} 
			else {
				alert("Your browser doesn't support geolocation!");
			}
		}

		/* Updating to my location */
		function draw_map() {
			console.log("inside draw_map function");
			var me = new google.maps.LatLng(my_lat, my_lng);

			/* Update map and pan to me */
			map.panTo(me);




			var content_string = "<div class = 'string_content'>" + "Jade is here!" + "</div>";

			var marker = new google.maps.Marker ({
				position: me,
				title: "Hello!"
			});

			var infowindow = new google.maps.InfoWindow({
				content: content_string
			});

			marker.addListener('click', function() {
    			infowindow.open(map, marker);
  			});

			/* Adding marker to map */
			console.log("about to set marker to map");
			marker.setMap(map);

		}


	</script>

</head>

<body onload="initMap()">
	<!-- Making the space for the canvas -->
	<div id="map"></div>
	</body>




</html>